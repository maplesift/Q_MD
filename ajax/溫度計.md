# ä½¿ç”¨ AJAX å»ºç«‹å‹•æ…‹æº«åº¦è¨ˆ

## **ä»‹ç´¹**
æœ¬å°ˆæ¡ˆç¤ºç¯„å¦‚ä½•ä½¿ç”¨ **AJAX** ç²å–å¤©æ°£ API ä¾†å‹•æ…‹é¡¯ç¤ºç•¶å‰æº«åº¦ï¼Œä¸¦ä»¥ **æº«åº¦è¨ˆ** çš„æ–¹å¼è¦–è¦ºåŒ–æ•¸æ“šã€‚æ­¤æ‡‰ç”¨å¯ç”¨æ–¼é¡¯ç¤ºä¸åŒåœ°å€çš„å³æ™‚æº«åº¦ï¼Œä¸¦è‡ªå‹•æ›´æ–°ã€‚

---

## **åŠŸèƒ½èªªæ˜**
âœ… **ç”¨ AJAX ç²å–ç•¶å‰åœ°å€æº«åº¦**ï¼ˆä½¿ç”¨ OpenWeather APIï¼‰  
âœ… **é¡¯ç¤ºç•¶å‰æº«åº¦æ•¸å€¼**ï¼ˆæ•¸å­—é¡¯ç¤ºï¼‰  
âœ… **æ ¹æ“šæº«åº¦è®ŠåŒ–ï¼Œå‹•æ…‹èª¿æ•´æº«åº¦è¨ˆæ°´éŠ€æŸ±é«˜åº¦**  
âœ… **è‡ªå‹•æ¯ 1 åˆ†é˜æ›´æ–°ä¸€æ¬¡æº«åº¦æ•¸æ“š**

---

## **ä½¿ç”¨æŠ€è¡“**
- **HTML**ï¼ˆæ¶æ§‹ç¶²é ï¼‰
- **CSS**ï¼ˆè¨­è¨ˆæº«åº¦è¨ˆæ¨£å¼ï¼‰
- **JavaScript & jQuery**ï¼ˆAJAX ç²å–æº«åº¦æ•¸æ“š & å‹•æ…‹æ›´æ–°ï¼‰
- **OpenWeather API**ï¼ˆå–å¾—å³æ™‚å¤©æ°£è³‡è¨Šï¼‰

---

## **ä½¿ç”¨æ–¹å¼**
1. **ç”³è«‹ OpenWeather API Key**  
   - è¨ªå• [OpenWeather](https://openweathermap.org/api) è¨»å†Šå¸³æˆ¶ï¼Œå–å¾— API Keyã€‚
   - æ–¼ç¨‹å¼ä¸­æ›¿æ› `ä½ çš„API_KEY` ç‚ºå¯¦éš› API Keyã€‚

2. **ä¿®æ”¹åŸå¸‚åç¨±**  
   - é è¨­ç‚º `Taipei`ï¼Œå¯æ”¹ç‚ºå…¶ä»–åŸå¸‚ï¼Œä¾‹å¦‚ `Kaohsiung`ã€`Taichung`ã€‚

3. **è¨­å®šæº«åº¦ç¯„åœ**  
   - é è¨­ `minTemp = -10; maxTemp = 40;`ï¼ˆé©åˆå°ç£æ°£å€™ï¼‰ã€‚
   - è‹¥éœ€æ›´æ”¹ï¼Œå¯æ”¹ç‚º `minTemp = 0; maxTemp = 50;`ã€‚

---

## **ä¸»è¦ç¨‹å¼ç¢¼æ¦‚è¦½**
```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX æº«åº¦è¨ˆ</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .thermometer {
            width: 50px;
            height: 300px;
            background: #ddd;
            border-radius: 25px;
            position: relative;
            overflow: hidden;
            border: 2px solid #999;
        }

        .temperature {
            width: 100%;
            position: absolute;
            bottom: 0;
            background: red;
            transition: height 0.5s;
        }

        .temp-text {
            margin-top: 10px;
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h2>ç•¶å‰æº«åº¦</h2>
    <div class="thermometer">
        <div class="temperature" id="tempBar" style="height: 0;"></div>
    </div>
    <div class="temp-text">æº«åº¦ï¼š<span id="tempValue">--</span>Â°C</div>

    <script>
        function fetchTemperature() {
            let apiKey = "ä½ çš„API_KEY";  // ğŸ”¹ è«‹åˆ° OpenWeather è¨»å†Šå–å¾— API KEY
            let city = "Taipei";  // ğŸ”¹ ä½ çš„åŸå¸‚åç¨±
            let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`;

            $.ajax({
                url: apiUrl,
                type: "GET",
                dataType: "json",
                success: function(response) {
                    let temp = response.main.temp; // å–å¾—ç•¶å‰æº«åº¦
                    $("#tempValue").text(temp.toFixed(1));  // é¡¯ç¤ºæ•¸å­—æº«åº¦
                    updateThermometer(temp); // æ›´æ–°æº«åº¦è¨ˆ
                },
                error: function() {
                    alert("ç„¡æ³•ç²å–æº«åº¦è³‡è¨Šï¼");
                }
            });
        }

        function updateThermometer(temp) {
            let minTemp = -10;  // æœ€ä½æº«åº¦ï¼ˆå¯èª¿æ•´ï¼‰
            let maxTemp = 40;   // æœ€é«˜æº«åº¦ï¼ˆå¯èª¿æ•´ï¼‰
            let height = ((temp - minTemp) / (maxTemp - minTemp)) * 100; 
            
            if (height < 0) height = 0;
            if (height > 100) height = 100;

            $("#tempBar").css("height", height + "%");
        }

        // é é¢åŠ è¼‰æ™‚ç²å–æº«åº¦
        $(document).ready(function() {
            fetchTemperature();
            setInterval(fetchTemperature, 60000);  // æ¯ 1 åˆ†é˜æ›´æ–°ä¸€æ¬¡
        });
    </script>

</body>
</html>
```


### **HTML çµæ§‹**
- `h2` æ¨™é¡Œé¡¯ç¤ºæº«åº¦è¨ˆ
- `.thermometer` ç‚ºæº«åº¦è¨ˆå®¹å™¨
- `#tempBar` ä»£è¡¨æº«åº¦è¨ˆå…§éƒ¨çš„æ°´éŠ€æŸ±
- `#tempValue` é¡¯ç¤ºç•¶å‰æº«åº¦æ•¸å€¼

### **CSS æ¨£å¼**
- è¨­å®š `.thermometer` å¤–è§€ï¼ˆåœ“è§’ã€é‚Šæ¡†ã€èƒŒæ™¯è‰²ï¼‰
- `#tempBar` é«˜åº¦éš¨æº«åº¦è®ŠåŒ–ï¼Œç´…è‰²é¡¯ç¤º
- `clamp()` è¨­å®šå¯¬åº¦èˆ‡é«˜åº¦ï¼Œç¢ºä¿ RWD é©æ‡‰æ€§

### **JavaScriptï¼ˆAJAX ç²å–æº«åº¦ï¼‰**
1. **ä½¿ç”¨ `$.ajax()` å‘ OpenWeather API å–å¾—æº«åº¦è³‡è¨Š**
2. **æ›´æ–° `#tempValue` é¡¯ç¤ºæ•¸å­—æº«åº¦**
3. **è¨ˆç®— `#tempBar` é«˜åº¦ï¼Œä½¿å…¶ç¬¦åˆç•¶å‰æº«åº¦è®ŠåŒ–**
4. **ä½¿ç”¨ `setInterval()` æ¯ 60 ç§’é‡æ–°ç²å–æ•¸æ“š**

---

## **æ•ˆæœé è¦½**
ç•¶ AJAX å–å¾—æº«åº¦å¾Œï¼Œæº«åº¦è¨ˆæ°´éŠ€æŸ±çš„é«˜åº¦æœƒè‡ªå‹•èª¿æ•´ï¼Œä¾‹å¦‚ï¼š
- **25Â°C** â†’ é«˜åº¦ç´„ **50%**
- **10Â°C** â†’ é«˜åº¦ç´„ **33%**
- **35Â°C** â†’ é«˜åº¦ç´„ **75%**

é€™æ¨£å¯ä»¥ç›´è¦ºåŒ–é¡¯ç¤ºç•¶å‰æ°£æº«ï¼Œä¸¦ä¸”å‹•æ…‹æ›´æ–°æº«åº¦è¨ˆï¼ğŸ‰

---

## **çµèª**
æœ¬å°ˆæ¡ˆç¤ºç¯„äº†å¦‚ä½•é€é **AJAX å–å¾—å³æ™‚æ•¸æ“š**ï¼Œä¸¦å°‡å…¶ä»¥ **è¦–è¦ºåŒ–æ–¹å¼å‘ˆç¾**ï¼Œé©åˆæ‡‰ç”¨æ–¼ **å¤©æ°£ç¶²ç«™** æˆ– **ç‰©è¯ç¶²æº«åº¦ç›£æ§ç³»çµ±**ã€‚å¦‚æœæœ‰ä»»ä½•éœ€è¦æ”¹é€²çš„åœ°æ–¹ï¼Œæ­¡è¿é€²ä¸€æ­¥èª¿æ•´è¨­è¨ˆï¼ğŸ˜Š

